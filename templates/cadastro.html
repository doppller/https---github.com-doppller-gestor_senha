<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - Gestor de Senhas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilo.css') }}">
</head>
<body>
    <button class="dark-mode-toggle" onclick="toggleDarkMode()">ğŸŒ™</button>
    
    <div class="container">
        <div class="logo">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 15V17M6 21H18C19.1046 21 20 20.1046 20 19V13C20 11.8954 19.1046 11 18 11H6C4.89543 11 4 11.8954 4 13V19C4 20.1046 4.89543 21 6 21ZM16 11V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V11H16Z" 
                      stroke="var(--cor-primaria)" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <h1>Crie sua conta</h1>
        </div>

        <form method="POST" class="form-cadastro">
            <div class="form-group">
                <input type="text" name="usuario" placeholder="Escolha um nome de usuÃ¡rio" required>
            </div>
            <div class="form-group">
                <input type="password" name="senha" placeholder="Crie uma senha forte" required>
                <div class="password-strength">
                    <div class="strength-bar"></div>
                    <span class="strength-text">ForÃ§a da senha: <span>fraca</span></span>
                </div>
            </div>
            <div class="form-group">
                <input type="password" name="confirmar_senha" placeholder="Confirme sua senha" required>
            </div>
            <button type="submit" class="btn">Cadastrar</button>
        </form>

        <div class="form-link">
            JÃ¡ tem uma conta? <a href="{{ url_for('login') }}">FaÃ§a login</a>
        </div>
    </div>

    <script>
        // Controle do tema
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }

        // ValidaÃ§Ã£o de senha em tempo real
        const senhaInput = document.querySelector('input[name="senha"]');
        const strengthBar = document.querySelector('.strength-bar');
        const strengthText = document.querySelector('.strength-text span');

        senhaInput.addEventListener('input', function() {
            const strength = checkPasswordStrength(this.value);
            strengthBar.style.width = strength.percent + '%';
            strengthBar.style.backgroundColor = strength.color;
            strengthText.textContent = strength.text;
            strengthText.style.color = strength.color;
        });

        function checkPasswordStrength(password) {
            const strength = {
                percent: 0,
                color: '#ff0000',
                text: 'fraca'
            };
            
            // LÃ³gica de forÃ§a da senha (simplificada)
            if (password.length > 0) strength.percent = 25;
            if (password.length >= 6) strength.percent = 50;
            if (password.length >= 8 && /[A-Z]/.test(password)) strength.percent = 75;
            if (password.length >= 10 && /[A-Z]/.test(password) && /[0-9]/.test(password) && /[^A-Za-z0-9]/.test(password)) {
                strength.percent = 100;
                strength.color = '#4cc9f0';
                strength.text = 'forte';
            } else if (strength.percent >= 75) {
                strength.color = '#4895ef';
                strength.text = 'boa';
            } else if (strength.percent >= 50) {
                strength.color = '#f8961e';
                strength.text = 'mÃ©dia';
            }
            
            return strength;
        }
    </script>
</body>
</html>